/** @license
 * crossroads <https://github.com/MyUNiDAYS/crossroads.js>
 * Author: Andrew Bullock, Miller Medeiros | MIT License
 * v0.13.0 (2016/12/31 10:08)
 */
;(function(){var a=function(){function d(a,b){if(a.indexOf)return a.indexOf(b);var c=a.length;while(c--)if(a[c]===b)return c;return-1}function e(a,b){var c=d(a,b);c!==-1&&a.splice(c,1)}function f(a,b){return"[object "+b+"]"===Object.prototype.toString.call(a)}function g(a){return f(a,"RegExp")}function h(a){return f(a,"Array")}function i(a){return typeof a=="function"}function j(a){var b;return a===null||a==="null"?b=null:a==="true"?b=!0:a==="false"?b=!1:a===c||a==="undefined"?b=c:a===""||isNaN(a)?b=a:b=parseFloat(a),b}function k(a){var b=a.length,c=[];while(b--)c[b]=j(a[b]);return c}function l(a,b){var c=(a||"").replace("?","").split("&"),d=/([^=]+)=(.+)/,e=-1,f={},g,i,k,l;while(i=c[++e])g=i.indexOf("="),l=i.substring(0,g),k=decodeURIComponent(i.substring(g+1)),b!==!1&&(k=j(k)),l in f?h(f[l])?f[l].push(k):f[l]=[f[l],k]:f[l]=k;return f}function m(){this._routes=[]}function n(a,b,c,d){var e=g(a),f=d.patternLexer;this._router=d,this.data=b,this._pattern=a,this._paramsIds=e?null:f.getParamIds(a),this._optionalParamsIds=e?null:f.getOptionalParamsIds(a),this._matchRegexp=e?a:f.compilePattern(a,d.ignoreCase),this._priority=c||0}var a,b,c;return b=/t(.+)?/.exec("t")[1]==="",m.prototype={ignoreCase:!0,shouldTypecast:!1,normalizeFn:null,create:function(){return new m},addRoute:function(a,b,c){var d=new n(a,b,c,this);return this._sortedInsert(d),d},removeRoute:function(a){e(this._routes,a),a._destroy()},removeAllRoutes:function(){var a=this.getNumRoutes();while(a--)this._routes[a]._destroy();this._routes.length=0},parse:function(a){return this._getMatchedRoute(a)},getNumRoutes:function(){return this._routes.length},_sortedInsert:function(a){var b=this._routes,c=b.length;do--c;while(b[c]&&a._priority<=b[c]._priority);b.splice(c+1,0,a)},_getMatchedRoute:function(a){var b=this._routes,c=b.length,d;while(d=b[--c])if(d.match(a))return{route:d,params:d._getParamsArray(a)};return null},toString:function(){return"[crossroads numRoutes:"+this.getNumRoutes()+"]"}},a=new m,a.VERSION="0.13.0",a.NORM_AS_ARRAY=function(a,b){return[b.vals_]},a.NORM_AS_OBJECT=function(a,b){return[b]},n.prototype={rules:void 0,match:function(a){return a=a||"",this._matchRegexp.test(a)&&this._validateParams(a)},_validateParams:function(a){var b=this.rules,c=this._getParamsObject(a),d;for(d in b)if(d!=="normalize_"&&b.hasOwnProperty(d)&&!this._isValidParam(a,d,c))return!1;return!0},_isValidParam:function(a,b,c){var e=this.rules[b],f=c[b],j=!1,k=b.indexOf("?")===0;return f==null&&this._optionalParamsIds&&d(this._optionalParamsIds,b)!==-1?j=!0:g(e)?(k&&(f=c[b+"_"]),j=e.test(f)):h(e)?(k&&(f=c[b+"_"]),j=this._isValidArrayRule(e,f)):i(e)&&(j=e(f,a,c)),j},_isValidArrayRule:function(a,b){if(!this._router.ignoreCase)return d(a,b)!==-1;typeof b=="string"&&(b=b.toLowerCase());var c=a.length,e,f;while(c--){e=a[c],f=typeof e=="string"?e.toLowerCase():e;if(f===b)return!0}return!1},_getParamsObject:function(a){var c=this._router.shouldTypecast,e=this._router.patternLexer.getParamValues(a,this._matchRegexp,c),f={},g=e.length,h,i;while(g--)i=e[g],this._paramsIds&&(h=this._paramsIds[g],h.indexOf("?")===0&&(i===undefined&&(i=""),f[h+"_"]=i,i=l(i,c),e[g]=i),b&&i===""&&d(this._optionalParamsIds,h)!==-1&&(i=void 0,e[g]=i),f[h]=i),f[g]=i;return f.request_=c?j(a):a,f.vals_=e,f},_getParamsArray:function(a){var b=this.rules?this.rules.normalize_:null,c;return b=b||this._router.normalizeFn,b&&i(b)?c=b(a,this._getParamsObject(a)):c=this._getParamsObject(a).vals_,c},interpolate:function(a){var b=this._router.patternLexer.interpolate(this._pattern,a);if(!this._validateParams(b))throw new Error("Generated string doesn't validate against `Route.rules`.");return b},dispose:function(){this._router.removeRoute(this)},_destroy:function(){this._pattern=this._matchRegexp=null},toString:function(){return'[Route pattern:"'+this._pattern+"]"}},m.prototype.patternLexer=function(){function l(){var a,b;for(a in e)e.hasOwnProperty(a)&&(b=e[a],b.id="__CR_"+a+"__",b.save="save"in b?b.save.replace("{{id}}",b.id):b.id,b.rRestore=new RegExp(b.id,"g"))}function m(a,b){var c=[],d;a.lastIndex=0;while(d=a.exec(b))c.push(d[1]);return c}function n(a){return m(d,a)}function o(a){return m(e.OP.rgx,a)}function p(d,e){return d=d||"",d&&(j===f?d=d.replace(b,""):j===i&&(d=d.replace(c,"")),d=q(d,"rgx","save"),d=d.replace(a,"\\$&"),d=q(d,"rRestore","res"),j===f&&(d="\\/?"+d)),j!==g&&(d+="\\/?"),new RegExp("^"+d+"$",e?"i":"")}function q(a,b,c){var d,f;for(f in e)e.hasOwnProperty(f)&&(d=e[f],a=a.replace(d[b],d[c]));return a}function r(a,b,c){var d=b.exec(a);return d&&(d.shift(),c&&(d=k(d))),d}function s(a,b){b=b||{};if(typeof a!="string")throw new Error("Route pattern should be a string.");var c=function(a,c){var d;c=c.substr(0,1)==="?"?c.substr(1):c;if(b[c]!=null){if(typeof b[c]=="object"){var e=[],f;for(var g in b[c]){f=b[c][g];if(h(f))for(var i in f)g.slice(-2)=="[]"?e.push(encodeURI(g.slice(0,-2))+"[]="+encodeURI(f[i])):e.push(encodeURI(g+"="+f[i]));else e.push(encodeURI(g+"="+f))}d="?"+e.join("&")}else d=String(b[c]);if(a.indexOf("*")===-1&&d.indexOf("/")!==-1)throw new Error('Invalid value "'+d+'" for segment "'+a+'".')}else{if(a.indexOf("{")!==-1)throw new Error("The segment "+a+" is required.");d=""}return d};return e.OS.trail||(e.OS.trail=new RegExp("(?:"+e.OS.id+")+$")),a.replace(e.OS.rgx,e.OS.save).replace(d,c).replace(e.OS.trail,"").replace(e.OS.rRestore,"/")}var a=/[\\.+*?\^$\[\](){}\/'#]/g,b=/^\/|\/$/g,c=/\/$/g,d=/(?:\{|:)([^}:]+)(?:\}|:)/g,e={OS:{rgx:/([:}]|\w(?=\/))\/?(:|(?:\{\?))/g,save:"$1{{id}}$2",res:"\\/?"},RS:{rgx:/([:}])\/?(\{)/g,save:"$1{{id}}$2",res:"\\/"},RQ:{rgx:/\{\?([^}]+)\}/g,res:"\\?([^#]+)"},OQ:{rgx:/:\?([^:]+):/g,res:"(?:\\?([^#]*))?"},OR:{rgx:/:([^:]+)\*:/g,res:"(.*)?"},RR:{rgx:/\{([^}]+)\*\}/g,res:"(.+)"},RP:{rgx:/\{([^}]+)\}/g,res:"([^\\/?]+)"},OP:{rgx:/:([^:]+):/g,res:"([^\\/?]+)?/?"}},f=1,g=2,i=3,j=f;return l(),{strict:function(){j=g},loose:function(){j=f},legacy:function(){j=i},getParamIds:n,getOptionalParamsIds:o,getParamValues:r,compilePattern:p,interpolate:s}}(),a};typeof define=="function"&&define.amd?define(["signals"],a):typeof module!="undefined"&&module.exports?module.exports=a(require("signals")):window.crossroads=a(window.signals)})();